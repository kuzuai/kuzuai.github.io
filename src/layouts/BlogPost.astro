---
import Base from "@layouts/Base.astro";
import type { CollectionEntry } from "astro:content";
import FormattedDate from "@components/FormattedDate.astro";
import CalendarIcon from "@icons/CalendarIcon.astro";
import CategoryIcon from "@icons/CategoryIcon.astro";
import { Image } from "astro:assets";
import config from "@config/config.json";
import { slugify } from "@utils/slug";
import authors from '../config/authors.json';

type Props = CollectionEntry<"post">["data"];

const { title, description, pubDate, heroImage, categories, tags } =
  Astro.props;
---

<Base meta_title={title} description={description} image={heroImage} blogpost>
  <article>
    <div class="md:col-10 mb-12">
      <h1 class="text-2xl md:text-4xl font-bold">{title}</h1>
      <div class="mt-4 flex flex-wrap text-text text-zinc-800 dark:text-zinc-200">
        <div class="flex flex-wrap font-medium mt-2">
          <figure>
            <Image
              alt={config.author.title}
              class="mr-2 h-6 w-6 rounded-full"
              width={25}
              height={250}
              src={config.author.avatar}
              decoding="async"
              loading="lazy"
            />
          </figure>
          <span>{config.author.name}</span>
        </div>
        <div class="mx-3 flex items-center flex-wrap font-medium mt-2">
          <CalendarIcon />
          <FormattedDate date={pubDate} />
        </div>
        <div class="mx-3 flex items-center flex-wrap font-medium mt-2">
          <CategoryIcon />
          {
            categories?.slice(0, 1).map((category) => (
              <a
                href={`/categories/${slugify(category)}`}
                class="mr-2 hover:text-primary font-medium capitalize"
              >
                {category}
              </a>
            ))
          }
        </div>
      </div>
    </div>
    <head>
        <link
          rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css"
          integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV"
          crossorigin="anonymous"
        >
    </head>
    <div class="prose prose-orange prose-md md:prose-lg min-w-full">
      <slot />
    </div>
    <div class="mt-8">
      {
        tags?.map((tag) => (
          <a
            href={`/tags/${slugify(tag)}`}
            class="capitalize inline-block bg-zinc-200 rounded-full px-3 py-1 text-sm font-semibold text-zinc-700 mr-2 mb-2 dark:bg-zinc-900 dark:text-zinc-400"
          >
            #{tag}
          </a>
        ))
      }
    </div>
  </article>
</Base>
